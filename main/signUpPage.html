<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Signup Page</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>


<body>
    <div class="bg-[#072507] flex justify-center items-center ">
        
        <div class="w-1/2 hidden lg:block">
            <img src="/imagess/pexel3.webp" alt="Placeholder Image" class="object-cover w-full h-[180vh]">
        </div>

        
        <div class="lg:p-36  md:p-52 sm:20 p-8 w-full lg:w-1/2">
            <img class="mt-[-147px] ml-[-120px] mb-16" src="/imagess/logo-removebg-preview.png" alt="">
            <h1 class="text-2xl font-semibold text-[#948E8E] text-center">Create a new account</h1><br>
            
            
            <div id="googleSignUp" class="mb-4">
                <button onclick="googleSignUp()"
                    class="flex items-center mb-2 justify-center ml-[55px] transition ease-in-out delay-50 px-3 py-2.5 space-x-2 bg-white border border-slate-600 rounded-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-600 focus:ring-opacity-50">
                    <svg viewBox="0 0 48 48" width="24" height="24" xmlns="http://www.w3.org/2000/svg" fill="#000000">
                        <path d="M23.49 12.3c0-.71-.06-1.39-.18-2.04H12v3.83h6.33c-.27 1.53-1.07 2.83-2.27 3.53v2.94h3.64c2.14-1.97 3.36-4.91 3.36-8.26z" fill="#4285F4" />
                        <path d="M12 6.08c1.11 0 2.08.37 2.83.98l2.1-2.1C15.34 3.37 13.51 2 11.2 2 7.75 2 5 4.75 5 8.2s2.75 6.2 6.2 6.2c3.58 0 6.46-2.63 6.46-5.92z" fill="#34A853" />
                        <path d="M7.75 12.4c-1.02 0-1.94-.35-2.69-.94l-2.1 2.1C3.94 13.63 5.67 15 7.75 15c1.24 0 2.33-.42 3.22-1.13l-2.4-2.4c-.49.31-1.09.5-1.67.5z" fill="#FBBC05" />
                        <path d="M12 8.2c0-.45-.09-.87-.24-1.27H12v3.83h-6.33c-.27 1.53-1.07 2.83-2.27 3.53v2.94h3.64c2.14-1.97 3.36-4.91 3.36-8.26z" fill="#EA4335" />
                    </svg>
                    <span class="text-gray-700 font-medium">Continue with Google</span>
                </button>
            </div>

            <h1 class="text-2xl text-[#948E8E] text-center">OR</h1><br>
            <form action="#" id="signUp" method="POST">
                
                <div class="form">
                    <label for="fullname" class="block text-gray-600">Full Name</label>
                    <input type="text" id="fullName" name="fullname" placeholder="Enter your full name" required
                        class="w-full border border-gray-300 rounded-md py-2 px-3 focus:outline-none focus:border-blue-500"
                        autocomplete="off">
                </div>
                
                <div class="form">
                    <label for="email" class="block text-gray-600">Email</label>
                    <input type="email" id="email" name="email" placeholder="Enter your email" required
                        class="w-full border border-gray-300 rounded-md py-2 px-3 focus:outline-none focus:border-blue-500"
                        autocomplete="off">
                </div>
                
                <div class="form">
                    <label for="username" class="block text-gray-600">Username</label>
                    <input type="text" id="userName" name="username" placeholder="Enter your username" required
                        class="w-full border border-gray-300 rounded-md py-2 px-3 focus:outline-none focus:border-blue-500"
                        autocomplete="off">
                </div>

                
                <div class="form">
                    <label for="password" class="block text-gray-600">Password</label>
                    <input type="password" id="password" name="password" placeholder="Enter your password" required
                        class="w-full border border-gray-300 rounded-md py-2 px-3 focus:outline-none focus:border-blue-500"
                        autocomplete="off">
                </div>
                <div class="form">
                    <label for="password" class="block text-gray-600">Confirm Password</label>
                    <input type="password" id="confirmPassword" name="password" placeholder="Confirm your password"
                        required
                        class="w-full border border-gray-300 rounded-md py-2 px-3 focus:outline-none focus:border-blue-500"
                        autocomplete="off">
                </div><br>

                <span><input class=" mb-5 text-sm" type="checkbox" required> I agree with privacy and policy</span>
                <li class="text-[#67a57f] text-sm "><a href="http://127.0.0.1:5500/main/privacyPolicy.html">Privacy
                        Policy</a></li>
                <li class="text-[#67a57f] text-sm"><a href="http://127.0.0.1:5500/main/termOfService.html">Terms of
                        Service</a></li><br>

                <button type="submit"
                    class="bg-[#276B27] hover:bg-[#104110] text-white font-semibold rounded-md py-2 px-4 w-full">Sign
                    Up</button>
            </form>
            
            <div class="mt-6 text-[#948E8E] text-center">
                <a href="#" class="hover:underline" onclick="showLoginPage()">Already have an account? Click here to
                    Login</a>
            </div>
        </div>
    </div>

</body>

<script>
    const emailRegex = /^([a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6})$/;
    const passwordRegex = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&]).{8,}$/;

    document.getElementById('signUp').addEventListener('submit', function (event) {
        const fullName = document.getElementById('fullName');
        const email = document.getElementById('email');
        const userName = document.getElementById('userName');
        const password = document.getElementById('password');
        const confirmPassword = document.getElementById('confirmPassword');
        event.preventDefault();

        // Validate email format
        if (!emailRegex.test(email.value)) {
            alert('Please enter a valid email address.');
            event.preventDefault();
            return;
        }

        // Validate password format
        if (!passwordRegex.test(password.value)) {
            alert('Password must be at least 8 characters long, contain one uppercase letter, one number, and one special character.');
            event.preventDefault();
            return;
        }

        // Confirm password matching
        if (password.value !== confirmPassword.value) {
            alert('Passwords do not match!');
            event.preventDefault();
            return;
        }

        // Used to check if email is already registered
        if (localStorage.getItem(email.value) || localStorage.getItem(userName.value)) {
            alert('This email or username is already registered. Please try a different one.');
            event.preventDefault();
            return;
        }

        const userData = {
            fullName: fullName.value,
            email: email.value,
            userName: userName.value,
            password: password.value
        };

        localStorage.setItem(email.value, JSON.stringify(userData));
        localStorage.setItem(userName.value, JSON.stringify(userData));
        alert('Signup successful! You can now log in.');
        setTimeout(function () {
            window.location.href = './loginPage.html';
        }, 1500);
    });

    function showLoginPage() {
        setTimeout(function () {
            window.location.href = './loginPage.html';
        }, 1500);
    }

    
    const CLIENT_ID = '307808808555-am06f7ejodfffpq59akhvfhdvajptrt8.apps.googleusercontent.com'; // 

    // Initialize Google Sign-In
    function renderGoogleSignInButton() {
        google.accounts.id.initialize({
            client_id: CLIENT_ID,
            callback: handleCredentialResponse
        });

        google.accounts.id.renderButton(
            document.getElementById("googleSignUp"),
            {
                theme: "outline",
                size: "large",
                text: "signin_with"
            }
        );
    }

    // Handle the response after Google Sign-In
    function handleCredentialResponse(response) {
        console.log("Google sign-in successful!");
        const userObject = parseJwt(response.credential);
        console.log("User Info:", userObject);

    }

    // Helper function to parse the JWT token and extract user information
    function parseJwt(token) {
        var base64Url = token.split('.')[1];
        var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
        var jsonPayload = decodeURIComponent(atob(base64).split('').map(function (c) {
            return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
        }).join(''));

        return JSON.parse(jsonPayload);
    }

    // Run the Google Sign-In button initialization after loading the script
    window.onload = renderGoogleSignInButton;

</script>

</html>
